(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9134:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a(3966)}])},3966:function(e,l,a){"use strict";a.r(l);var t=a(5893),n=a(2586),s=a(3764),i=a(498),r=a(7066),o=a(5675),c=a.n(o),u=a(1163),d=a(7294);l.default=function(){let e=(0,u.useRouter)(),[{userInfo:l},a]=(0,n.C4)(),[o,m]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),[x,f]=(0,d.useState)(void 0),[N,g]=(0,d.useState)(""),[b,j]=(0,d.useState)({userName:"",fullName:"",description:"",phoneNumber:"",cnic:"",location:""});(0,d.useEffect)(()=>{let e={...b};l&&((null==l?void 0:l.username)&&(e.userName=null==l?void 0:l.username),(null==l?void 0:l.description)&&(e.description=null==l?void 0:l.description),(null==l?void 0:l.fullName)&&(e.fullName=null==l?void 0:l.fullName),(null==l?void 0:l.phoneNumber)&&(e.phoneNumber=null==l?void 0:l.phoneNumber),(null==l?void 0:l.cnic)&&(e.cnic=null==l?void 0:l.cnic),(null==l?void 0:l.location)&&(e.location=null==l?void 0:l.location),(null==l?void 0:l.imageName)&&fetch(l.imageName).then(async e=>{let l=e.headers.get("content-type"),a=await e.blob(),t=new File([a],x,{contentType:l});f(t)}),j(e),m(!0))},[l]);let handleChange=e=>{j({...b,[e.target.name]:e.target.value})},setProfile=async()=>{try{let t=await r.Z.post(i.bu,{...b},{withCredentials:!0});if(t.data.userNameError)g("Enter a Unique Username");else{let t="";if(x){let e=new FormData;e.append("images",x);let{data:{img:l}}=await r.Z.post(i.GJ,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});t=l}a({type:s.J.SET_USER,userInfo:{...l,...b,image:!!t.length&&i.M5+"/"+t}}),e.push("/")}}catch(e){console.error(e)}},v="block p-4 w-full text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500",y="mb-2 text-lg font-medium text-gray-900 dark:text-white",C="text-center mb-8 text-gray-700";return(0,t.jsx)(t.Fragment,{children:o&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start min-h-[80vh] gap-6",children:[(0,t.jsx)("h1",{className:C+" text-4xl font-bold",children:"Welcome to TaskKar"}),(0,t.jsx)("h2",{className:C+" text-xl",children:"Complete your profile to unlock the full potential of TaskKar"}),N&&(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"text-red-600 font-bold",children:N})}),(0,t.jsxs)("div",{className:"flex flex-col items-center w-full gap-5",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,t.jsx)("label",{className:y,htmlFor:"",children:"Select a Profile Picture"}),(0,t.jsxs)("div",{className:"bg-purple-500 h-36 w-36 flex items-center justify-center rounded-full relative",children:[x?(0,t.jsx)(c(),{src:URL.createObjectURL(x),alt:"profile",fill:!0,className:"rounded-full"}):(0,t.jsx)("span",{className:"text-6xl text-white",children:l.email[0].toUpperCase()}),(0,t.jsx)("div",{className:"absolute bg-slate-400 h-full w-full rounded-full flex items-center justify-center transition-all duration-100 ".concat(h?"opacity-100":"opacity-0"),children:(0,t.jsx)("input",{type:"file",onChange:e=>{let l=e.target.files,a=l[0].type;["image/gif","image/jpeg","image/png"].includes(a)&&f(l[0])},className:"opacity-0",name:"profileImage"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 w-[500px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:y,htmlFor:"userName",children:"Username"}),(0,t.jsx)("input",{className:v,type:"text",name:"userName",id:"userName",placeholder:"Enter your username",value:b.userName,onChange:handleChange})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:y,htmlFor:"fullName",children:"Full Name"}),(0,t.jsx)("input",{className:v,type:"text",name:"fullName",id:"fullName",placeholder:"Enter your full name",value:b.fullName,onChange:handleChange})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 w-[500px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:y,htmlFor:"phoneNumber",children:"Phone Number"}),(0,t.jsx)("input",{className:v,type:"text",name:"phoneNumber",id:"phoneNumber",placeholder:"+92XXXXXXXXXX",value:b.phoneNumber,onChange:handleChange})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:y,htmlFor:"cnic",children:"CNIC"}),(0,t.jsx)("input",{className:v,type:"text",name:"cnic",id:"cnic",placeholder:"Enter your 13-digit CNIC",value:b.cnic,onChange:handleChange})]})]}),(0,t.jsxs)("div",{className:"flex flex-col w-[500px]",children:[(0,t.jsx)("label",{className:y,htmlFor:"location",children:"Location"}),(0,t.jsx)("input",{className:v,type:"text",name:"location",id:"location",placeholder:"Enter your location",value:b.location,onChange:handleChange})]}),(0,t.jsxs)("div",{className:"flex flex-col w-[500px]",children:[(0,t.jsx)("label",{className:y,htmlFor:"description",children:"Description"}),(0,t.jsx)("textarea",{name:"description",id:"description",value:b.description,onChange:handleChange,className:v,placeholder:"Write a brief description about yourself"})]}),(0,t.jsx)("button",{className:"border text-lg font-semibold px-5 py-3 border-[#1DBF73] bg-[#1DBF73] text-white rounded-md",type:"button",onClick:setProfile,children:"Save Profile"})]})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9134)}),_N_E=e.O()}]);