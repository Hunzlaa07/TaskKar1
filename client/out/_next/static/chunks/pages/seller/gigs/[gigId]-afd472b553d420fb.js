(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{9238:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seller/gigs/[gigId]",function(){return a(9537)}])},2279:function(e,t,a){"use strict";var l=a(5893),r=a(5675),s=a.n(r),i=a(7294);t.Z=function(e){let{files:t,setFile:a}=e,{useState:r}=i,[n,c]=r(),removeImage=e=>{a(t.filter(t=>t.name!==e))};return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex  items-center px-3",children:(0,l.jsx)("div",{className:"rounded-lg  bg-gray-50 w-full",children:(0,l.jsxs)("div",{className:"m-4",children:[(0,l.jsx)("span",{className:"flex justify-center items-center text-[12px] mb-1 text-red-500",children:n}),(0,l.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,l.jsxs)("label",{className:"flex cursor-pointer flex-col w-full h-32 border-2 rounded-md border-dashed hover:bg-gray-100 hover:border-gray-300",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center pt-7",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-gray-400 group-hover:text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,l.jsx)("p",{className:"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:"Select a photo"})]}),(0,l.jsx)("input",{type:"file",onChange:e=>{c("");let l=e.target.files;for(let e=0;e<l.length;e++){let r=l[e].type,s=["image/gif","image/jpeg","image/png"];s.includes(r)?a([...t,l[e]]):c("only images accepted")}},className:"opacity-0",multiple:!0,name:"files[]"})]})}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map((e,t)=>(0,l.jsxs)("div",{className:"overflow-hidden relative",children:[(0,l.jsx)("i",{onClick:()=>{removeImage(e.name)},className:"mdi mdi-close absolute right-1 hover:text-white cursor-pointer z-20",children:"X"}),(0,l.jsx)("div",{className:"relative h-20 w-20 rounded-md",children:(0,l.jsx)(s(),{src:URL.createObjectURL(e),fill:!0,alt:"Gigs"})})]},t))})]})})})})}},9537:function(e,t,a){"use strict";a.r(t);var l=a(5893),r=a(2279),s=a(8828),i=a(498),n=a(7066),c=a(1163),d=a(7294),o=a(461);t.default=function(){let[e]=(0,o.Z)(),t=(0,c.useRouter)(),{gigId:a}=t.query,h="block p-4 w-full text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50  focus:ring-blue-500 focus:border-blue-500",m="mb-2 text-lg font-medium text-gray-900  dark:text-white",[g,u]=(0,d.useState)([]),[x,p]=(0,d.useState)([]),[f,v]=(0,d.useState)({title:"",category:"",description:"",time:0,revisions:0,feature:"",price:0,shortDesc:""}),removeFeature=e=>{let t=[...x];t.splice(e,1),p(t)},handleChange=e=>{v({...f,[e.target.name]:e.target.value})};(0,d.useEffect)(()=>{let fetchGigData=async()=>{try{let{data:{gig:e}}=await n.Z.get("".concat(i.bs,"/").concat(a));v({...e,time:e.revisions}),p(e.features),e.images.forEach(e=>{fetch("http://localhost:8747/uploads/"+e).then(async t=>{let a=t.headers.get("content-type"),l=await t.blob(),r=new File([l],e,{contentType:a});u([r])})})}catch(e){console.log(e)}};a&&fetchGigData()},[a]);let editGig=async()=>{let{category:a,description:l,price:r,revisions:s,time:c,title:d,shortDesc:o}=f;if(a&&l&&d&&x.length&&g.length&&r>0&&o.length&&s>0&&c>0){let h=new FormData;g.forEach(e=>h.append("images",e));let m=await n.Z.put("".concat(i.Pk,"/").concat(f.id),h,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e.jwt)},params:{title:d,description:l,category:a,features:x,price:r,revisions:s,time:c,shortDesc:o}});201===m.status&&t.push("/seller/gigs")}};return(0,l.jsxs)("div",{className:"min-h-[80vh] my-10 mt-0 px-32",children:[(0,l.jsx)("h1",{className:"text-6xl text-gray-900 mb-5",children:"Edit Gig"}),(0,l.jsx)("h3",{className:"text-3xl text-gray-900 mb-5",children:"Enter the details to edit the gig"}),(0,l.jsxs)("form",{action:"",className:"flex flex-col gap-5 mt-10",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-11",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"title",className:m,children:"Gig Title"}),(0,l.jsx)("input",{name:"title",value:f.title,onChange:handleChange,type:"text",id:"title",className:h,placeholder:"e.g. I will do something I'm really good at",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"categories",className:m,children:"Select a Category"}),(0,l.jsx)("select",{id:"categories",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-4",name:"category",onChange:handleChange,value:f.category,children:s.b.map(e=>{let{name:t}=e;return(0,l.jsx)("option",{value:t,children:t},t)})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"description",className:m,children:"Gig Description"}),(0,l.jsx)("textarea",{id:"description",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Write a short description",name:"description",value:f.description,onChange:handleChange})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-11",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"delivery",children:"Delivery Time"}),(0,l.jsx)("input",{type:"number",className:h,id:"delivery",name:"time",value:f.time,onChange:handleChange,placeholder:"Minimum Delivery Time"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"revision",className:m,children:"Revisions"}),(0,l.jsx)("input",{type:"number",id:"revision",className:h,placeholder:"Max Number of Revisions",name:"revisions",value:f.revisions,onChange:handleChange})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-11",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"features",className:m,children:"Features"}),(0,l.jsxs)("div",{className:"flex gap-3 items-center mb-5",children:[(0,l.jsx)("input",{type:"text",id:"features",className:h,placeholder:"Enter a Feature Name",name:"feature",value:f.feature,onChange:handleChange}),(0,l.jsx)("button",{type:"button",className:"focus:outline-none text-white bg-blue-700 hover:bg-blue-800  font-medium  text-lg px-10 py-3 rounded-md ",onClick:()=>{f.feature&&(p([...x,f.feature]),v({...f,feature:""}))},children:"Add"})]}),(0,l.jsx)("ul",{className:"flex gap-2 flex-wrap",children:x.map((e,t)=>(0,l.jsxs)("li",{className:"flex gap-2 items-center py-2.5 px-5 mr-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-red-700 cursor-pointer hover:border-red-200",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("span",{className:"text-red-700",onClick:()=>removeFeature(t),children:"X"})]},e+t.toString()))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"image",className:m,children:"Gig Images"}),(0,l.jsx)("div",{children:(0,l.jsx)(r.Z,{files:g,setFile:u})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-11",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"shortDesc",className:m,children:"Short Description"}),(0,l.jsx)("input",{type:"text",className:"".concat(h," w-1/5"),id:"shortDesc",placeholder:"Enter a short description.",name:"shortDesc",value:f.shortDesc,onChange:handleChange})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"price",className:m,children:"Gig Price ( Rs )"}),(0,l.jsx)("input",{type:"number",className:"".concat(h," w-1/5"),id:"price",placeholder:"Enter a price",name:"price",value:f.price,onChange:handleChange})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"border   text-lg font-semibold px-5 py-3   border-[#1DBF73] bg-[#1DBF73] text-white rounded-md",type:"button",onClick:editGig,children:"Edit"})})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9238)}),_N_E=e.O()}]);