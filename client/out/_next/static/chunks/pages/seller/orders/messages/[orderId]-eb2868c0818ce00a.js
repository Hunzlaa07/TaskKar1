(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{8384:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seller/orders/messages/[orderId]",function(){return t(1410)}])},8338:function(e,s,t){"use strict";var a=t(5893),n=t(7294),c=t(9583),l=t(3750),i=t(7066),r=t(498),d=t(1163),u=t(2586);s.Z=function(){let e=(0,d.useRouter)(),{orderId:s}=e.query,[{userInfo:t}]=(0,u.C4)(),[o,x]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let getMessages=async()=>{let{data:{messages:e,recipentId:t}}=await i.Z.get("".concat(r.SP,"/").concat(s),{withCredentials:!0});g(e),x(t)};s&&t&&getMessages()},[s,t]);let[h,f]=(0,n.useState)(""),[m,g]=(0,n.useState)([]),sendMessage=async()=>{if(h.length){let e=await i.Z.post("".concat(r._2,"/").concat(s),{message:h,recipentId:o},{withCredentials:!0});201===e.status&&(g([...m,e.data.message]),f(""))}};return(0,a.jsx)("div",{className:"h-[80vh]",children:(0,a.jsx)("div",{className:"max-h-[80vh]   flex flex-col justify-center items-center",children:(0,a.jsxs)("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-lg sm:px-10 w-[80vw] border flex flex-col",children:[(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"space-y-4 h-[50vh] overflow-y-auto pr-4 ",children:m.map(e=>(0,a.jsx)("div",{className:"flex ".concat(e.senderId===t.id?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"inline-block rounded-lg ".concat(e.senderId===t.id?"bg-[#1DBF73] text-white":"bg-gray-100 text-gray-800"," px-4 py-2 max-w-xs break-all"),children:[(0,a.jsx)("p",{children:e.text}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:function(e){let s=new Date(e),t=s.getHours(),a=s.getMinutes(),n=t>=12?"PM":"AM";t%=12,t=t||12,a=a<10?"0"+a:a;let c="".concat(t,":").concat(a," ").concat(n);return c}(e.createdAt)}),(0,a.jsx)("span",{children:e.senderId===t.id&&e.isRead&&(0,a.jsx)(l.fC0,{})})]})},e.id))})}),(0,a.jsxs)("div",{className:"mt-8 flex",children:[(0,a.jsx)("input",{type:"text",className:"rounded-full py-2 px-4 mr-2 w-full",placeholder:"Type a message...",name:"message",onChange:e=>f(e.target.value),value:h}),(0,a.jsx)("button",{type:"submit",className:"bg-[#1DBF73] text-white rounded-full px-4 py-2",onClick:sendMessage,children:(0,a.jsx)(c.P58,{})})]})]})})})}},1410:function(e,s,t){"use strict";t.r(s);var a=t(5893),n=t(8338);t(7294),s.default=function(){return(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{})})}}},function(e){e.O(0,[13,445,774,888,179],function(){return e(e.s=8384)}),_N_E=e.O()}]);